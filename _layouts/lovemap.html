---
layout: default
---

<br/><br/><br/>



<style>
  .lv-year{
    margin-top: 2.5rem;
  }

  .lv-year-title{
    font-weight: bold;
    font-size: 3.2em; 
    display: inline-block;
    color: #eeeeee;
  }
  .lv-year-count{
    font-weight: bold;
    display: inline-block;
    font-size: 2.2em;
    color: #eeeeef;
  }
  .lv-year-count::before{
    content: "x";
    margin-left: 1em;
    margin-right: 0.5em;
    font-size: 1.5rem;
    color: #eeeeef;
  }
</style>

 
<div id="loveiContainer">
 
  
   
  <!-- <div class='heatmap' id="loveid"> -->
    
  </div>
   
  <script >
    function create_heatmap(heatmapid,endYear,dataObj){



      let container =  document.getElementById('loveiContainer')
      let divtitle = document.createElement('div')
      divtitle.className = 'lv-year'

      let divYear =  document.createElement('div')
      divYear.className = 'lv-year-title'
      divYear.innerText = endYear 
      divtitle.appendChild(divYear)

      let divYearC =  document.createElement('div')
      divYearC.className = 'lv-year-count'
      divYearC.innerText = '' + dataObj.allYear[endYear]
      divtitle.appendChild(divYearC)



      container.appendChild(divtitle) 
      let div = document.createElement('div')
      div.className = 'heatmap'
      div.id = heatmapid

      container.appendChild(div)

      setTimeout(() => {
        create_heatmap0( heatmapid,endYear,dataObj)
      }, 1);
    }
    function create_heatmap0(heatmapid,endYear,dataObj){
   
    {%- assign MothStr = site.theme_config.heatMapMonth  -%}
    {%- assign HeatMapShowWeek = site.theme_config.heatMapShowWeek  -%}
    {%- assign heatMapLoadCount = site.theme_config.heatMapLoadCount | default: 9  -%}
    
    const WeeKStartStr = "{{ site.theme_config.heatMapWeekStart | default: 0 }}" ;//  0 sunday 1 monday 2. tuesday ...

    const heatMapLoadCount = {{heatMapLoadCount}};
    var _MonthStr =  '{{ MothStr | default: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec" }}';
    var _showWeek =  '{{ HeatMapShowWeek | default: "Sun Mon Tue Wed Thu Fri Sat" }}';
    var _allyearurl =  '{{ "assets/dyn/allyear.json" | relative_url }}';
    {% include heatmap.js  %}


    __filldata(heatmapid,endYear,WeeKStartStr,heatMapLoadCount,_MonthStr,_showWeek,_allyearurl,dataObj,'lv')
    }



  </script>
   
  

  
  </div>

 {{ content }}




  
 <script> 
    
   /// 2025-01-01 描述，日期格式yyyy-mm-dd，空格后跟上 描述
   function getDataFromSignleLine(str0){
      let str = str0.trim()
      if(!str) return null
      var arr = str.split(" ")
      var date = arr[0]
      if(date ){
        let ymd = date.split("-")
        if(ymd.length == 3){
          let year =  ymd[0]
          let month = ymd[1]
          let day =   ymd[2]
          date = year + "-" + month.padStart(2, '0') + "-" + day.padStart(2, '0')
      }
      }

      if (!date) {
        console.error("Invalid date format: " + str0)
        return null
      }
      var title = ""
      if(arr.length > 1){
        title = arr.slice(1).join(" ")
      }
      return {date:date,title:title}
   }

   function fillDataObj(data,item){
    if(!item) return
    let y = item.date.substring(0,4);
    let m = item.date.substring(5,7);
    let c = data.allYear[y]; 
    data.allYear[y] = c ? c + 1 : 1;
    
    let yObj = data[y]
    if(!yObj){
      yObj = {}
      data[y] = yObj;
    }

    let arr = yObj[m]
    if(!arr){
      arr = []
      yObj[m] = arr
    }
    arr.push(item)

   }
  !function(){
    var endYear = "{{ include.endYear }}"
    
    let allYear = {}
    let data = {allYear:allYear};
    
    let arrCodes = document.querySelectorAll('pre > code')
    if(arrCodes.length > 0){
      arrCodes.forEach(function(code){
        var strAll = code.textContent
        strAll.split("\n").forEach(function(str){
          let item = getDataFromSignleLine(str)
          fillDataObj(data,item)
        })
        
      })
    }

    let allYearArr = Object.keys(allYear).sort().reverse()

    console.log(allYear)
    console.log(allYearArr)
    for(let i = 0; i < allYearArr.length; i++){
      let y = allYearArr[i]
      create_heatmap('lmp' + y ,y,data )


    } 
    
    
  }()
  </script>