
{%-assign posts = include.collection -%}
{%- if posts.size > 0 -%}

{% assign ymPre = "" %}
{% assign archive_date_format =  site.theme_config.archive_date_format | default: "%Y" %}

{% assign archive_date_titleformat = site.theme_config.archive_title_date_format | default: "%m-%d" %} 

{% assign yCounter = 0 %}
<ul class="postlistul">
{%- for post in posts limit: include.limit -%}
    {% assign  ymCur = post.date | date: archive_date_format %}  
    {% if ymCur != ymPre %}
        {% if ymPre != "" %}
             </ul>
        {% endif %}
      {% if yCounter == 0 %}
      <li class="postlistli largeli largeli0">{{ymCur}}</li> 
      {% else %}
        <li class="postlistli largeli">{{ymCur}}</li> 
      {% endif %}
      
      {%- assign yCounter = yCounter | plus:1 -%}
      <ul class="postlistul">
    {% endif %}
    {% assign ymPre = ymCur %}
    
    <li class="postlistli">
          <a href="{{ post.url | relative_url }}">{{ post.title  }}</a>
          <date datetime="{{post.date}}">{{- post.date | date: archive_date_titleformat }}</date>
    </li>

{%- endfor -%}
</ul>
{%- endif -%}

 